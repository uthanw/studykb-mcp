# StudyKB MCP

<p align="center">
  <strong>ğŸ“ æ™ºèƒ½å­¦ä¹ çŸ¥è¯†åº“ç®¡ç† + è¿›åº¦è¿½è¸ª MCP æœåŠ¡</strong>
</p>

<p align="center">
  åŸºäº <a href="https://modelcontextprotocol.io/">Model Context Protocol</a> çš„ AI å­¦ä¹ åŠ©æ‰‹ï¼Œä¸“ä¸ºè€ƒç ”ç­‰é•¿æœŸå­¦ä¹ åœºæ™¯è®¾è®¡ã€‚
</p>

<p align="center">
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a> â€¢
  <a href="#mcp-tools-å‚è€ƒ">MCP Tools</a> â€¢
  <a href="#ç®¡ç†å·¥å…·">ç®¡ç†å·¥å…·</a> â€¢
  <a href="#å¼€å‘æŒ‡å—">å¼€å‘æŒ‡å—</a>
</p>

---

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”Œ MCP æœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰

ä¸º AI å®¢æˆ·ç«¯ï¼ˆClaude Desktopã€Cursor ç­‰ï¼‰æä¾›çŸ¥è¯†åº“è®¿é—®å’Œè¿›åº¦ç®¡ç†èƒ½åŠ›ï¼š

- **çŸ¥è¯†åº“æµè§ˆ**ï¼šæŒ‰å¤§ç±»ç»„ç»‡èµ„æ–™ï¼Œæ”¯æŒç´¢å¼•å’Œå…¨æ–‡æœç´¢
- **è¡Œçº§è¯»å–**ï¼šç²¾ç¡®è¯»å–æŒ‡å®šè¡ŒèŒƒå›´ï¼Œé¿å…åŠ è½½å¤§æ–‡ä»¶
- **è¿›åº¦è¿½è¸ª**ï¼š`pending` â†’ `active` â†’ `done` â†’ `review` å®Œæ•´çŠ¶æ€æµè½¬
- **è‰¾å®¾æµ©æ–¯å¤ä¹ **ï¼šåŸºäºé—å¿˜æ›²çº¿è‡ªåŠ¨è®¡ç®—å¤ä¹ æ—¶é—´
- **TUI é£æ ¼è¾“å‡º**ï¼šé«˜ä¿¡æ¯å¯†åº¦ï¼Œä½ Token å¼€é”€

### ğŸ› ï¸ ç®¡ç†å·¥å…·ï¼ˆCLI / Webï¼‰

ä¸º MCP æœåŠ¡å‡†å¤‡æ•°æ®ï¼Œä¸¤ç§ç•Œé¢åŠŸèƒ½ç­‰ä»·ï¼š

| åŠŸèƒ½ | CLI (TUI) | Web |
|------|-----------|-----|
| åˆ›å»º/åˆ é™¤åˆ†ç±» | âœ… | âœ… |
| å¯¼å…¥èµ„æ–™æ–‡ä»¶ | âœ… | âœ… æ‹–æ‹½ä¸Šä¼  |
| æ–‡æ¡£è½¬æ¢ (PDFâ†’MD) | âœ… MinerU API | âœ… MinerU API |
| ç”Ÿæˆç´¢å¼• (AI Agent) | âœ… | âœ… å®æ—¶è¿›åº¦ |
| åˆå§‹åŒ–è¿›åº¦ (AI Agent) | âœ… | âœ… å®æ—¶è¿›åº¦ |
| æŸ¥çœ‹/ç¼–è¾‘è¿›åº¦ | âœ… | âœ… å¯è§†åŒ– |

### ğŸ¤– AI Agent è‡ªåŠ¨åŒ–

- **IndexAgent**ï¼šåˆ†ææ–‡æ¡£ç»“æ„ï¼Œç”Ÿæˆç« èŠ‚ç´¢å¼•å’Œè¡Œå·æ˜ å°„
- **ProgressAgent**ï¼šæ ¹æ®èµ„æ–™è‡ªåŠ¨è§„åˆ’å­¦ä¹ è¿›åº¦æ¡ç›®
- **å®‰å…¨æ²™ç®±**ï¼šAgent å·¥å…·ä¸¥æ ¼åªè¯»é™åˆ¶

---

## é¡¹ç›®ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI å®¢æˆ·ç«¯                               â”‚
â”‚            (Claude Desktop / Cursor / ...)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ MCP åè®®
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   studykb_mcp (æ ¸å¿ƒ)                         â”‚
â”‚                   9 ä¸ª MCP Tools                             â”‚
â”‚         çŸ¥è¯†åº“è¯»å– / è¿›åº¦ç®¡ç† / è‰¾å®¾æµ©æ–¯å¤ä¹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ è¯»å†™
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å±‚ (kb/ + progress/)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ ç®¡ç†
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   studykb_init      â”‚       â”‚   studykb_admin     â”‚
â”‚   CLI ç®¡ç†å·¥å…·       â”‚  â‰¡    â”‚   Web ç®¡ç†å·¥å…·       â”‚
â”‚   (Rich TUI)        â”‚       â”‚   (Vue3 + FastAPI)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
studykb-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ studykb_mcp/           # ğŸ”Œ MCP æœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ server.py          # MCP æœåŠ¡å™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘ï¼ˆKB/è¿›åº¦/å¤ä¹ ï¼‰
â”‚   â”‚   â”œâ”€â”€ tools/             # 9 ä¸ª MCP Tool å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ utils/             # TUI æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ studykb_init/          # ğŸ–¥ï¸ CLI ç®¡ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ cli.py             # Rich TUI äº¤äº’ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ agents/            # AI Agent (ç´¢å¼•/è¿›åº¦)
â”‚   â”‚   â”œâ”€â”€ operations/        # åˆ†ç±»/å¯¼å…¥æ“ä½œ
â”‚   â”‚   â””â”€â”€ services/          # MinerU è½¬æ¢æœåŠ¡
â”‚   â”‚
â”‚   â””â”€â”€ studykb_admin/         # ğŸŒ Web ç®¡ç†å·¥å…·
â”‚       â”œâ”€â”€ server.py          # FastAPI åç«¯
â”‚       â”œâ”€â”€ api/               # REST API è·¯ç”±
â”‚       â””â”€â”€ web/               # Vue3 + TailwindCSS å‰ç«¯
â”‚
â”œâ”€â”€ kb/                        # çŸ¥è¯†åº“ç›®å½•
â”œâ”€â”€ progress/                  # è¿›åº¦æ•°æ®ç›®å½•
â”œâ”€â”€ config/                    # LLM/MinerU é…ç½®
â””â”€â”€ tests/                     # æµ‹è¯•ç”¨ä¾‹
```

---

## å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Python >= 3.10
- æ”¯æŒ MCP åè®®çš„å®¢æˆ·ç«¯ï¼ˆå¦‚ Claude Desktopã€Cursor ç­‰ï¼‰

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/studykb-mcp.git
cd studykb-mcp

# å®‰è£…åŸºç¡€ç‰ˆï¼ˆä»… MCP æœåŠ¡ï¼‰
pip install -e .

# å®‰è£…å®Œæ•´ç‰ˆï¼ˆå«åˆå§‹åŒ–å·¥å…·å’Œç®¡ç†åå°ï¼‰
pip install -e ".[all]"
```

### é…ç½® MCP å®¢æˆ·ç«¯

#### Claude Desktop

ç¼–è¾‘ `~/Library/Application Support/Claude/claude_desktop_config.json`ï¼ˆmacOSï¼‰ï¼š

```json
{
  "mcpServers": {
    "studykb": {
      "command": "studykb-mcp",
      "args": [],
      "env": {
        "STUDYKB_KB_PATH": "/path/to/your/kb",
        "STUDYKB_PROGRESS_PATH": "/path/to/your/progress"
      }
    }
  }
}
```

#### Cursor / VS Code

åœ¨ MCP è®¾ç½®ä¸­æ·»åŠ ï¼š

```json
{
  "studykb": {
    "command": "studykb-mcp",
    "env": {
      "STUDYKB_KB_PATH": "./kb",
      "STUDYKB_PROGRESS_PATH": "./progress"
    }
  }
}
```

### å¯åŠ¨æœåŠ¡

```bash
# MCP æœåŠ¡å™¨ï¼ˆstdio æ¨¡å¼ï¼Œä¾› AI å®¢æˆ·ç«¯è¿æ¥ï¼‰
studykb-mcp

# MCP æœåŠ¡å™¨ï¼ˆSSE/HTTP æ¨¡å¼ï¼‰
studykb-mcp --transport sse --port 8080

# åˆå§‹åŒ–å·¥å…·ï¼ˆRich TUI äº¤äº’ï¼‰
studykb-init

# Web ç®¡ç†åå°
studykb-admin --host 0.0.0.0 --port 3000
```

---

## MCP Tools å‚è€ƒ

StudyKB æä¾› **9 ä¸ª MCP Tools**ï¼Œè¦†ç›–çŸ¥è¯†åº“æµè§ˆã€å†…å®¹è¯»å–ã€è¿›åº¦ç®¡ç†çš„å®Œæ•´æµç¨‹ã€‚

### å·¥å…·ä¸€è§ˆ

| Tool | åŠŸèƒ½ | ä¸»è¦å‚æ•° |
|------|------|----------|
| `read_overview` | è·å–çŸ¥è¯†åº“å…¨æ™¯å›¾ | - |
| `read_progress` | è·å–å­¦ä¹ è¿›åº¦ | `category`, `progress_id?`, `status_filter?`, `since?` |
| `create_progress` | åˆ›å»ºæ–°è¿›åº¦æ¡ç›® | `category`, `progress_id`, `name`, `status?`, `comment?` |
| `update_progress` | æ›´æ–°ç°æœ‰è¿›åº¦ | `category`, `progress_id`, `status`, `comment?` |
| `delete_progress` | åˆ é™¤è¿›åº¦æ¡ç›® | `category`, `progress_id` |
| `read_index` | è¯»å–èµ„æ–™ç´¢å¼• | `category`, `material` |
| `read_file` | è¯»å–èµ„æ–™å†…å®¹ | `category`, `material`, `start_line`, `end_line` |
| `grep` | æœç´¢å…³é”®è¯ | `category`, `pattern`, `material?`, `context_lines?` |
| `batch_call` | å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå·¥å…· | `calls` (æœ€å¤š10ä¸ª) |

---

### `read_overview`

è·å–çŸ¥è¯†åº“å…¨æ™¯å›¾ï¼Œåˆ—å‡ºæ‰€æœ‰å¤§ç±»åŠå…¶åŒ…å«çš„èµ„æ–™æ–‡ä»¶ã€‚

**å‚æ•°**ï¼šæ— 

**è°ƒç”¨æ—¶æœº**ï¼š
- å¯¹è¯å¼€å§‹æ—¶ï¼Œäº†è§£å½“å‰çŸ¥è¯†åº“æœ‰å“ªäº›å†…å®¹
- ç”¨æˆ·æåˆ°ä¸€ä¸ªä¸ç¡®å®šæ˜¯å¦å­˜åœ¨çš„å­¦ç§‘/èµ„æ–™æ—¶

**è¿”å›ç¤ºä¾‹**ï¼š

```
# Knowledge Base Overview

æ•°æ®ç»“æ„/ (2 files)
  â”œ 26ç‹é“ã€Šæ•°æ®ç»“æ„ã€‹     23965 ln  [IDX]
  â”” ç®—æ³•ç¬”è®°               3500 ln

æ“ä½œç³»ç»Ÿ/ (1 files)
  â”” 26ç‹é“ã€Šæ“ä½œç³»ç»Ÿã€‹     19800 ln  [IDX]

---
2 categories, 3 files
[IDX] = index available
```

---

### `read_progress`

è·å–æŸä¸ªå¤§ç±»çš„å­¦ä¹ è¿›åº¦è¿½è¸ªæ•°æ®ã€‚è°ƒç”¨æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶è§¦å‘ `done` â†’ `review` çš„çŠ¶æ€è½¬æ¢ã€‚

**å‚æ•°**ï¼š

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `category` | string | æ˜¯ | å¤§ç±»åç§° |
| `progress_id` | string | å¦ | æŒ‡å®šæŸ¥è¯¢å•ä¸ªè¿›åº¦æ¡ç›® |
| `status_filter` | array | å¦ | ç­›é€‰çŠ¶æ€ï¼š`done`, `active`, `review`, `pending` |
| `since` | string | å¦ | æ—¶é—´èŒƒå›´ï¼š`7d`, `30d`, `90d`, `all` |

**è¿”å›ç¤ºä¾‹**ï¼š

```
# Progress: æ•°æ®ç»“æ„

done: 23 | active: 1 | review: 3 | pending: 18 | total: 45
[====================..........] 51%

## ğŸ”¥ active (1)

ds.graph.mst.kruskal | Kruskalç®—æ³•
  "è¾¹æ’åº+å¹¶æŸ¥é›†æ€è·¯ï¼Œæ­£åœ¨çœ‹å…·ä½“å®ç°"
  updated: 2h ago

## ğŸ”„ review (3)

ds.linear.array.prefix_sum | å‰ç¼€å’Œ | +14d overdue
ds.tree.traversal.inorder | ä¸­åºéå† | +10d overdue

## âœ… done (showing 5, +18 more)

ds.graph.mst.prim         | Primç®—æ³•      | Jan 19
ds.graph.shortest.dijkstra | Dijkstra     | Jan 18
```

---

### `create_progress` / `update_progress`

åˆ›å»ºæˆ–æ›´æ–°å­¦ä¹ è¿›åº¦æ¡ç›®ã€‚

**å‚æ•°**ï¼š

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `category` | string | æ˜¯ | å¤§ç±»åç§° |
| `progress_id` | string | æ˜¯ | ç‚¹åˆ†å±‚çº§æ ¼å¼ï¼Œå¦‚ `ds.graph.mst.kruskal` |
| `name` | string | åˆ›å»ºæ—¶å¿…å¡« | çŸ¥è¯†ç‚¹åç§° |
| `status` | string | æ˜¯ | `pending`, `active`, `done`, `review` |
| `comment` | string | å¦ | ä¸€å¥è¯æè¿°/ç¬”è®° |
| `related_sections` | array | å¦ | å…³è”çš„èµ„æ–™è¡Œå·èŒƒå›´ |

**çŠ¶æ€è½¬æ¢é€»è¾‘**ï¼š

```
active â†’ done    : è®¾ç½® mastered_at, è®¡ç®— next_review_at
review â†’ done    : review_count += 1, é‡æ–°è®¡ç®— next_review_at (é—´éš” Ã— 1.5)
* â†’ active/review: æ¸…é™¤ next_review_at
```

---

### `read_index`

è¯»å–èµ„æ–™çš„ç´¢å¼•æ–‡ä»¶ï¼Œè·å–ç« èŠ‚ç»“æ„å’Œè¡Œå·æ˜ å°„ã€‚

**å‚æ•°**ï¼š`category`, `material`

**è¿”å›**ï¼šç´¢å¼•æ–‡ä»¶çš„å®Œæ•´ Markdown å†…å®¹ï¼ŒåŒ…å«ç« èŠ‚ç»“æ„å’Œè¡Œå·å®šä½ã€‚

---

### `read_file`

è¯»å–èµ„æ–™æ–‡ä»¶çš„æŒ‡å®šè¡ŒèŒƒå›´å†…å®¹ã€‚

**å‚æ•°**ï¼š`category`, `material`, `start_line`, `end_line`

**é™åˆ¶**ï¼šå•æ¬¡æœ€å¤šè¯»å– 500 è¡Œ

---

### `grep`

åœ¨èµ„æ–™ä¸­æœç´¢å…³é”®è¯ï¼Œè¿”å›åŒ¹é…è¡ŒåŠä¸Šä¸‹æ–‡ã€‚

**å‚æ•°**ï¼š`category`, `pattern`, `material?`, `context_lines?`, `max_matches?`

---

### `batch_call`

å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå·¥å…·è°ƒç”¨ï¼Œæé«˜æ•ˆç‡ã€‚

**å‚æ•°**ï¼š

```json
{
  "calls": [
    {"tool": "read_progress", "arguments": {"category": "æ•°æ®ç»“æ„"}},
    {"tool": "read_index", "arguments": {"category": "æ•°æ®ç»“æ„", "material": "ç‹é“æ•°æ®ç»“æ„"}}
  ]
}
```

---

## å…¸å‹äº¤äº’æµç¨‹

```
ç”¨æˆ·: "ä»Šå¤©å­¦ç‚¹æ–°ä¸œè¥¿"
         â”‚
         â–¼
    read_overview()          â† çœ‹çœ‹çŸ¥è¯†åº“æœ‰ä»€ä¹ˆ
         â”‚
         â–¼
    read_progress(...)       â† çœ‹çœ‹å­¦åˆ°å“ªäº†
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æœ‰ç´¢å¼•?  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      æ˜¯ â”‚ å¦
         â”‚    â”‚
         â–¼    â–¼
  read_index() grep()        â† å®šä½å†…å®¹
         â”‚    â”‚
         â””â”€â”€â”¬â”€â”˜
            â–¼
      read_file()            â† è¯»å–åŸæ–‡
            â”‚
            â–¼
     update_progress()       â† æ ‡è®°å¼€å§‹å­¦ä¹ 
            â”‚
            â–¼
        [å¼€å§‹è®²è§£]
```

---

## ç®¡ç†å·¥å…·

CLI å’Œ Web ä¸¤ç§ç®¡ç†ç•Œé¢åŠŸèƒ½ç­‰ä»·ï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„æ–¹å¼ï¼š

### CLI ç®¡ç†å·¥å…· (studykb-init)

```bash
studykb-init

# äº¤äº’å¼èœå•ï¼š
1. åˆ›å»ºæ–°åˆ†ç±»
2. å¯¼å…¥èµ„æ–™æ–‡ä»¶ (.md)
3. å¯¼å…¥å¹¶è½¬æ¢æ–‡æ¡£ (PDF/Word/PPT â†’ MD)
4. ä¸ºèµ„æ–™ç”Ÿæˆç´¢å¼• (AI Agent)
5. åˆå§‹åŒ–å­¦ä¹ è¿›åº¦ (AI Agent)
6. å®Œæ•´åˆå§‹åŒ–æµç¨‹ (ä¸€é”®å®Œæˆ)
7. é…ç½® API (LLM + MinerU)
0. é€€å‡º
```

### Web ç®¡ç†å·¥å…· (studykb-admin)

```bash
studykb-admin --host 0.0.0.0 --port 3000
```

| é¡µé¢ | åŠŸèƒ½ |
|------|------|
| `/` | åˆ†ç±»ç®¡ç†ã€èµ„æ–™ä¸Šä¼ ï¼ˆæ‹–æ‹½ï¼‰ã€ç´¢å¼•ç”Ÿæˆã€è¿›åº¦åˆå§‹åŒ– |
| `/progress` | å­¦ä¹ è¿›åº¦æ€»è§ˆ |
| `/progress/:category` | åˆ†ç±»è¿›åº¦è¯¦æƒ… |
| `/settings` | API é…ç½® |

**Web ç‰¹è‰²**ï¼šæ‹–æ‹½ä¸Šä¼ ã€WebSocket å®æ—¶ä»»åŠ¡è¿›åº¦ã€æ·±è‰²ä¸»é¢˜ UI

---

## æ•°æ®æ ¼å¼

### çŸ¥è¯†åº“ç›®å½•ç»“æ„

```
kb/
â”œâ”€â”€ æ•°æ®ç»“æ„/
â”‚   â”œâ”€â”€ 26ç‹é“ã€Šæ•°æ®ç»“æ„ã€‹.md        # èµ„æ–™æ–‡ä»¶
â”‚   â”œâ”€â”€ 26ç‹é“ã€Šæ•°æ®ç»“æ„ã€‹_index.md  # ç´¢å¼•æ–‡ä»¶ï¼ˆAgent ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ ç®—æ³•ç¬”è®°.md
â”œâ”€â”€ æ“ä½œç³»ç»Ÿ/
â”‚   â”œâ”€â”€ 26ç‹é“ã€Šæ“ä½œç³»ç»Ÿã€‹.md
â”‚   â””â”€â”€ 26ç‹é“ã€Šæ“ä½œç³»ç»Ÿã€‹_index.md
```

### è¿›åº¦æ•°æ®ç»“æ„

```json
{
  "category": "æ•°æ®ç»“æ„",
  "last_updated": "2025-01-20T14:30:00",
  "entries": {
    "ds.graph.mst.kruskal": {
      "name": "Kruskalç®—æ³•",
      "status": "done",
      "comment": "è¾¹æ’åº+å¹¶æŸ¥é›†ï¼Œæ—¶é—´O(ElogE)",
      "updated_at": "2025-01-20T14:30:00",
      "mastered_at": "2025-01-20T14:30:00",
      "review_count": 0,
      "next_review_at": "2025-01-27T00:00:00",
      "related_sections": [
        {
          "material": "26ç‹é“ã€Šæ•°æ®ç»“æ„ã€‹.md",
          "start_line": 14230,
          "end_line": 14280,
          "desc": "Kruskalç®—æ³•æ­£æ–‡"
        }
      ]
    }
  }
}
```

### çŠ¶æ€å®šä¹‰

| çŠ¶æ€ | å«ä¹‰ | è¯´æ˜ |
|------|------|------|
| `pending` | å¾…å­¦ä¹  | å¯é€‰ï¼Œç”¨äºè§„åˆ’ |
| `active` | æ­£åœ¨å­¦ä¹  | ç”¨æˆ·å¼€å§‹å­¦ä¹  |
| `done` | å·²æŒæ¡ | è§¦å‘å¤ä¹ è®¡æ—¶ |
| `review` | éœ€è¦å¤ä¹  | ç³»ç»Ÿè‡ªåŠ¨ä» done é™çº§ |

---

## å¤ä¹ æœºåˆ¶

### è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿

```
é—´éš”å¤©æ•° = åˆå§‹é—´éš” Ã— (å¢é•¿ç³»æ•° ^ å¤ä¹ æ¬¡æ•°)
```

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| åˆå§‹é—´éš” | 7 å¤© | é¦–æ¬¡æ ‡è®° done åçš„å¤ä¹ é—´éš” |
| å¢é•¿ç³»æ•° | 1.5 | æ¯æ¬¡æˆåŠŸå¤ä¹ åé—´éš”çš„å¢é•¿å€æ•° |
| æœ€å¤§é—´éš” | 90 å¤© | é—´éš”ä¸Šé™ |

**å¤ä¹ è®¡åˆ’ç¤ºä¾‹**ï¼š

| å¤ä¹ æ¬¡æ•° | é—´éš” | ç´¯è®¡å¤©æ•° |
|----------|------|----------|
| ç¬¬1æ¬¡ | 7å¤© | 7å¤© |
| ç¬¬2æ¬¡ | 10å¤© | 17å¤© |
| ç¬¬3æ¬¡ | 15å¤© | 32å¤© |
| ç¬¬4æ¬¡ | 23å¤© | 55å¤© |
| ç¬¬5æ¬¡ | 34å¤© | 89å¤© |
| ç¬¬6æ¬¡+ | 90å¤© | 179å¤©+ |

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `STUDYKB_HOST` | `0.0.0.0` | æœåŠ¡å™¨ç»‘å®šåœ°å€ |
| `STUDYKB_PORT` | `8080` | æœåŠ¡å™¨ç«¯å£ |
| `STUDYKB_KB_PATH` | `./kb` | çŸ¥è¯†åº“ç›®å½•è·¯å¾„ |
| `STUDYKB_PROGRESS_PATH` | `./progress` | è¿›åº¦æ•°æ®ç›®å½•è·¯å¾„ |
| `STUDYKB_MAX_READ_LINES` | `500` | å•æ¬¡ read_file æœ€å¤§è¡Œæ•° |
| `STUDYKB_MAX_GREP_MATCHES` | `100` | å•æ¬¡ grep æœ€å¤§åŒ¹é…æ•° |
| `STUDYKB_REVIEW_INITIAL_INTERVAL` | `7` | é¦–æ¬¡å¤ä¹ é—´éš”ï¼ˆå¤©ï¼‰ |
| `STUDYKB_REVIEW_MULTIPLIER` | `1.5` | å¤ä¹ é—´éš”å¢é•¿ç³»æ•° |
| `STUDYKB_REVIEW_MAX_INTERVAL` | `90` | æœ€å¤§å¤ä¹ é—´éš”ï¼ˆå¤©ï¼‰ |

### LLM é…ç½® (`config/llm_config.yaml`)

```yaml
# ç”¨äº AI Agent çš„ LLM é…ç½®
provider: openai  # æˆ– anthropic
api_key: sk-xxx
model: gpt-4o
base_url: https://api.openai.com/v1  # å¯é€‰
```

---

## å¼€å‘æŒ‡å—

### å®‰è£…å¼€å‘ä¾èµ–

```bash
pip install -e ".[all]"
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# å¸¦è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=studykb_mcp --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_services/ -v
```

### ä»£ç æ£€æŸ¥

```bash
# ä»£ç æ ¼å¼åŒ–å’Œ lint
ruff check src tests
ruff format src tests

# ç±»å‹æ£€æŸ¥
mypy src
```

### å‰ç«¯å¼€å‘

```bash
cd src/studykb_admin/web

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»º
npm run build
```

---

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| MCP SDK | `mcp>=1.0.0` |
| ä¼ è¾“åè®® | stdio / SSE |
| æ•°æ®éªŒè¯ | Pydantic v2 |
| é…ç½®ç®¡ç† | pydantic-settings |
| å¼‚æ­¥ IO | aiofiles |
| CLI ç•Œé¢ | Rich |
| Web åç«¯ | FastAPI |
| Web å‰ç«¯ | Vue 3 + TailwindCSS + Vite |
| æµ‹è¯•æ¡†æ¶ | pytest + pytest-asyncio |

---

## License

MIT License

---

## è‡´è°¢

- [Model Context Protocol](https://modelcontextprotocol.io/) - Anthropic å¼€æºçš„ AI åº”ç”¨åè®®
- [è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿](https://en.wikipedia.org/wiki/Forgetting_curve) - ç§‘å­¦è®°å¿†æ–¹æ³•è®º
